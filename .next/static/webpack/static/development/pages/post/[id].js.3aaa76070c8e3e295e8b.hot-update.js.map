{"version":3,"file":"static/webpack/static/development/pages/post/[id].js.3aaa76070c8e3e295e8b.hot-update.js","sources":["webpack:///./pages/post/.js","webpack:///./utils/CommonHelper.js","webpack:///./utils/index.js"],"sourcesContent":["import React from 'react'\nimport fetch from 'isomorphic-unfetch';\nimport _get from 'lodash/get';\nimport Layout from '../../components/layout';\nimport Content from '../../components/Article/Content';\nimport { CommonHelper } from '../../utils';\n\nconst Post = ({ dataPost: { title, content, createdAt, _id, category}, dataComment }) => {\n  console.log(dataComment);\n  return(\n    <Layout>\n      <h1 className='container__main--title'>\n        <span>\n          # {title}\n        </span>\n      </h1>\n\n      <div className='Article__item'>\n        <span className='Article__item--time'>{CommonHelper.dateString(createdAt)}</span>\n        <span className='Article__item--tag'>{category && category.name}</span>\n      </div>\n\n      <Content content={content} />\n    </Layout>\n  );\n};\n\nPost.getInitialProps = async function(ctx) {\n  const callApi = [\n    fetch('https://gateway.tuanndl.com/api/v1/article/' + ctx.query.id),\n    fetch('https://gateway.tuanndl.com/api/v1/comment/' + ctx.query.id)\n  ];\n\n  let responses = await Promise.all(callApi);\n  const dataPost = await responses[0].json();\n  const dataComment = await responses[1].json();\n\n  return {\n    dataPost: _get(dataPost, 'result',''),\n    dataComment: _get(dataComment, 'result,data',[]),\n  }\n};\n\nexport default Post;","\nexport default class CommonHelper {\n\n  static clearLocalStorage() {\n    const {lang, idEduCategory} = localStorage;\n    localStorage.clear();\n    sessionStorage.clear();\n    this.setAuthorizationToken(false);\n    if (lang) {\n      localStorage.setItem('lang', lang);\n    }\n    if (idEduCategory) {\n      localStorage.setItem('idEduCategory', idEduCategory);\n    }\n  };\n\n  static handleError(data) {\n    if (data.errors) {\n      const err = data.errors[0].code;\n      if (err === 'INVALID_TOKEN' || err === 'AUTHENTICATION_FAILED' || err === 'invalid signature' || err === 'TOKEN_EXPIRED') {\n        this.clearLocalStorage();\n        window.location.replace('/');\n      } else if (err === 'BLOCKED_USER') {\n        alert(`${data.errors[0].message}`);\n        this.clearLocalStorage();\n        window.location.replace('/');\n      } else {\n        return (\n          alert(data.errors[0].message)\n        );\n      }\n    }\n    return null;\n  };\n\n  static setAuthorizationToken(token) {\n    if (token) {\n      axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    } else {\n      delete axios.defaults.headers.common.Authorization;\n    }\n  }\n\n  static change_alias(alias) {\n    let str = alias;\n    str = str.toLowerCase();\n    str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,\"a\");\n    str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,\"e\");\n    str = str.replace(/ì|í|ị|ỉ|ĩ/g,\"i\");\n    str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,\"o\");\n    str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,\"u\");\n    str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,\"y\");\n    str = str.replace(/đ/g,\"d\");\n    str = str.replace(/!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g,\" \");\n    str = str.replace(/ + /g,\" \");\n    str = str.trim();\n    return str;\n  }\n\n  static dateString(date, showTime) {\n    date = new Date(date);\n    const year = date.getUTCFullYear();\n    let month = date.getMonth();\n    let day = date.getDate();\n\n    month = this.helperDateString(month + 1);\n    day = this.helperDateString(day);\n\n    let dateString = `${day}-${month}-${year}`;\n    if (showTime) {\n      let hours = date.getHours();\n      let min = date.getMinutes();\n      dateString = `${hours}:${min} ` + dateString;\n    }\n    return dateString;\n  }\n\n  static helperDateString(number) {\n    if (number < 10) {\n      number = '0' + number.toString();\n    }\n    return number.toString();\n  }\n\n};\n","import CommonHelper from './CommonHelper';\n\nexport {\n  CommonHelper,\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAMA;AANA;AAAA;AACA;AADA;AAOA;AAPA;AAAA;AACA;AADA;AAQA;AARA;AAWA;AACA;AAFA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAeA;;;;;;;;;;;;;;;;;;;AC1CA;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;AAjFA;AAmFA;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}